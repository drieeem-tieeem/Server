{% extends 'base.html' %}

{% block header %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename='javascript/newpill.js') }}"></script>
{% endblock %}

{% block content %}
<h3> YOUR PILLBOX ! </h3>
  <h4> â˜… next dosage: </h4>


<div class="grid-container">
{% for box in pillbox %}
  <div class="grid-item">
    <p> {{ box.name }} </p>
    <hr>
  </div>
{% endfor %}
{% for box in pillbox %}
  <div class="grid-item draggable">
    {% for pill in box['pills'] %}
      <div class="row">
        <div class="column" style="float: left;">
        <p class="timelabel">
          {{ pill.time }}
          <img src ="{{ url_for('static', filename=pill.icon) }}" class="image movable">
        </p>
        </div>
      </div>
    {% endfor %}
    <p> </p>
  </div>

{% endfor %}
</div>
<script src="{{ url_for('static', filename='javascript/dragula.js') }}"></script>
<script src="{{ url_for('static', filename='javascript/draganddrop.js') }}"></script>

<div class = "newpill" style="float: right;">
  <div id="contact">
    <img src="{{ url_for('static', filename='images/newpill.png') }}" style ="align: right">
    New Pill
  </div>

  <div id="contactForm">
    <h1>New Pill</h1>
    <form action="{{ url_for('api.create_pill') }}" method="post">
      <h6> Pill name: </h6>
      <input placeholder="Name" type="text" name="name" required />
      
      <h6> Pill shape: </h6>
      <div class = "select-style">
        <input type = "text" list = "icon-types" name="icon"> 
          <datalist id = "icon-types">
            {% for file in files %}
              <option value="img/{{ file }}"></option>
            {% endfor %}
          </datalist>
      </div>

      <h6> Pill description: </h6>
      <input placeholder="Description" type="text" name="description" />
      
      <input class="formBtn" type="submit" />
      <input class="formBtn" type="reset" />
    </form>
  </div>
</div>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/newpill.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='javascript/selectonebox.js') }}"></script>

<div class="pill-container">
  {% for pill in pill_collection %}
    <div class ="grid-content">
      <h6 align='center'>
        <img src ="{{ url_for('static', filename=pill.icon) }}" style ="align: left">
        <br>
        {{ pill.name }}
    </h6>
    </div>
  {% endfor %}
</div>

{% endblock %}